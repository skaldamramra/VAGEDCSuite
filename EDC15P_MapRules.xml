<?xml version="1.0" encoding="utf-8"?>
<!--
  EDC15P Map Detection Rules

  This file defines the rules for detecting and naming maps in EDC15P binary files.
  The detection engine evaluates these rules against potential maps found in the binary.

  Structure:
  <MapRules ecuType="EDC15P" version="2.0">

    <MapRule priority="100" id="unique_id">
      <Description>Human-readable description</Description>

      <Conditions>
        All conditions must match for the rule to apply.

        Basic Conditions:
        <Length>570</Length>                  - Exact length in bytes
        <Length min="500" max="600" />        - Length range

        <XAxisID high="0xC5" />               - X-axis ID high byte (e.g., 0xC5 for 0xC5EC)
        <XAxisID exact="0xC5EC" />            - Exact X-axis ID
        <YAxisID high="0xEC" />               - Y-axis ID high byte

        <XAxisLength>19</XAxisLength>         - X-axis length (number of points)
        <YAxisLength>15</YAxisLength>         - Y-axis length

        <MapSelector numRepeats="10" />       - For maps with selectors (e.g., SOI)

        Advanced Conditions (v2.0):
        <ByteCheck address="y_axis_address" offset="0" expected="0x00" op="eq" />
                                                      - Check raw byte at address
                                                      - address: "y_axis_address", "x_axis_address", "flash_start_address", or "+offset"/"-offset"
                                                      - op: "eq", "ne", "lt", "le", "gt", "ge"

        <AxisValueCheck axis="Y" comparison="lt" value="4000" checkType="max" />
                                                      - Check actual axis data values at runtime
                                                      - axis: "X", "Y", or "Z"
                                                      - comparison: "lt", "le", "gt", "ge", "eq", "ne"
                                                      - checkType: "max" (maximum value) or "min" (minimum value)

        <MapSelectorProperty property="NumRepeats" comparison="eq" value="10" />
                                                      - Check MapSelector properties
                                                      - property: "NumRepeats", "MapIndexes.Length", "MapIndexes[0]"
                                                      - comparison: "eq", "ne", "lt", "le", "gt", "ge"

        <CodeBlock id="1,2,3" type="Manual" />         - Check code block context
                                                      - id: comma-separated list of code block IDs
                                                      - type: "Automatic", "Manual", "4x4"

        Logical Operators:
        <Or>
          <Conditions>...</Conditions>
          <Conditions>...</Conditions>
        </Or>
        <And>
          <Conditions>...</Conditions>
          <Conditions>...</Conditions>
        </And>
      </Conditions>

      <Metadata>
        Properties to assign to the detected map.

        <Category>Detected maps</Category>
        <Subcategory>Fuel</Subcategory>

        <Name>Map Name</Name>                 - Static name
        <Name sequential="true" baseName="Injector duration" codeBlockScoped="true" />
                                              - Sequential naming (e.g., "Injector duration 00", "01")
                                              - codeBlockScoped: if true, counts only within same code block

        <ConditionalTemplate>
          <When conditionType="MapSelectorExists">
            <Template>Smoke limiter {temperature} °C</Template>
          </When>
          <When conditionType="default">
            <Template>Smoke limiter</Template>
          </When>
        </ConditionalTemplate>

        <Correction>0.01</Correction>         - Z-axis correction factor
        <Offset>0</Offset>                    - Z-axis offset

        <XAxis>
          <Description>Engine speed</Description>
          <Units>rpm</Units>
          <Correction>1.0</Correction>
          <Offset>0</Offset>
        </XAxis>

        <YAxis>...</YAxis>
        <ZAxis>...</ZAxis>
      </Metadata>
    </MapRule>
  </MapRules>
-->
<MapRules ecuType="EDC15P" version="2.0">
  
  <!-- 1. Launch Control -->
  <MapRule priority="100" id="launch_control_700">
    <Description>
      Launch control map - 25x14 dimension (700 bytes)
    </Description>
    <Conditions>
      <Length>700</Length>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Launch control map (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </XAxis>
      <YAxis>
        <Description>Approx. vehicle speed (km/h)</Description>
        <Units>km/h</Units>
        <Correction>0.156250</Correction>
      </YAxis>
      <ZAxis>
        <Description>IQ limit</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 1.1 SVRL (Single Value Rev Limiter) -->
  <MapRule priority="102" id="svrl_sequence">
    <Description>SVRL (Single Value Rev Limiter) - Detected by byte sequence</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-2" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-1" expected="0x0E" op="eq" />
      <ByteCheck address="flash_start_address" offset="2" expected="0x32" op="eq" />
      <ByteCheck address="flash_start_address" offset="3" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="4" expected="0x70" op="eq" />
      <ByteCheck address="flash_start_address" offset="5" expected="0x17" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Limiters</Subcategory>
      <Name>SVRL (Single Value Rev Limiter) (XML)</Name>
      <ZAxis>
        <Description>Engine speed (rpm)</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 1.2 SVBL (Single Value Boost Limiter) - Sequence 1 -->
  <MapRule priority="103" id="svbl_sequence_1">
    <Description>SVBL (Single Value Boost Limiter) - Sequence 1 (Legacy:353)</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-16" expected="0xD2" op="eq" />
      <ByteCheck address="flash_start_address" offset="-15" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-14" expected="0xFC" op="eq" />
      <ByteCheck address="flash_start_address" offset="-13" expected="0x03" op="eq" />
      <ByteCheck address="flash_start_address" offset="-8" expected="0x04" op="eq" />
      <ByteCheck address="flash_start_address" offset="-7" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-3" expected="0xC3" op="eq" />
      <ByteCheck address="flash_start_address" offset="-2" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-1" expected="0x00" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Limiters</Subcategory>
      <Name>SVBL Boost limiter (XML)</Name>
      <ZAxis><Description>Boost pressure (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 1.3 SVBL (Single Value Boost Limiter) - Sequence 2 -->
  <MapRule priority="104" id="svbl_sequence_2">
    <Description>SVBL (Single Value Boost Limiter) - Sequence 2 (Legacy:300)</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="2" expected="0xDF" op="eq" />
      <ByteCheck address="flash_start_address" offset="3" expected="0x7A" op="eq" />
      <ByteCheck address="flash_start_address" offset="4" expected="0x28" op="eq" />
      <ByteCheck address="flash_start_address" offset="5" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="10" expected="0xDF" op="eq" />
      <ByteCheck address="flash_start_address" offset="11" expected="0x7A" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Limiters</Subcategory>
      <Name>SVBL Boost limiter (XML)</Name>
      <ZAxis><Description>Boost pressure (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 2. BIP SOI Correction (Priority before Generic ID) -->
  <MapRule priority="105" id="bip_soi_correction_160">
    <Description>
      BIP SOI Correction Map (zmwBPKorKF) - 10x8 dimension (160 bytes)
      Based on legacy EDC15PFileParser.cs:2555
    </Description>
    <Conditions>
      <Length>160</Length>
      <XAxisLength>10</XAxisLength>
      <YAxisLength>8</YAxisLength>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Fuel</Subcategory>
      <Name>BIP SOI Correction Map (XML)</Name>
      <Correction>0.00390625</Correction>
      <XAxis>
        <Description>Crankshaft degrees</Description>
        <Units>°BTDC</Units>
        <Correction>0.023437</Correction>
        <Offset>-78</Offset>
      </XAxis>
      <YAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </YAxis>
      <ZAxis>
        <Description>BIP calculation</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 2.1 BIP Basic characteristic line -->
  <MapRule priority="106" id="bip_basic_line">
    <Description>BIP Basic characteristic line - Detected by signature (Legacy:914)</Description>
    <Conditions>
      <Length>20</Length>
      <XAxisID exact="0xC5D6" />
      <ByteCheck address="flash_start_address" offset="-22" expected="0x0A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-21" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-20" expected="0x58" op="eq" />
      <ByteCheck address="flash_start_address" offset="-19" expected="0x01" op="eq" />
      <ByteCheck address="flash_start_address" offset="-18" expected="0x89" op="eq" />
      <ByteCheck address="flash_start_address" offset="-17" expected="0x01" op="eq" />
      <ByteCheck address="flash_start_address" offset="-16" expected="0xBA" op="eq" />
      <ByteCheck address="flash_start_address" offset="-15" expected="0x01" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Fuel</Subcategory>
      <Name>BIP Basic characteristic line (XML)</Name>
      <XAxis>
        <Description>Battery voltage</Description>
        <Units>V</Units>
        <Correction>0.0203147</Correction>
      </XAxis>
      <ZAxis>
        <Description>Time in microseconds</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 2.2 BIP temperature correction -->
  <MapRule priority="107" id="bip_temp_correction">
    <Description>BIP temperature correction - Detected by signature (Legacy:935)</Description>
    <Conditions>
      <Length>20</Length>
      <XAxisID exact="0xC1BE" />
      <ByteCheck address="flash_start_address" offset="-22" expected="0x0A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-21" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-20" expected="0x4D" op="eq" />
      <ByteCheck address="flash_start_address" offset="-19" expected="0x09" op="eq" />
      <ByteCheck address="flash_start_address" offset="-18" expected="0xE3" op="eq" />
      <ByteCheck address="flash_start_address" offset="-17" expected="0x09" op="eq" />
      <ByteCheck address="flash_start_address" offset="-16" expected="0x47" op="eq" />
      <ByteCheck address="flash_start_address" offset="-15" expected="0x0A" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Fuel</Subcategory>
      <Name>BIP temperature correction (XML)</Name>
      <Correction>0.000244</Correction>
      <XAxis>
        <Description>Temperature</Description>
        <Units>°C</Units>
        <Correction>0.1</Correction>
        <Offset>-273.1</Offset>
      </XAxis>
      <ZAxis>
        <Description>Crankshaft degrees</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 2.3 MAP/MAF Switch -->
  <MapRule priority="107" id="map_maf_switch">
    <Description>MAP/MAF switch (Legacy:320, 394)</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-2" expected="0x41" op="eq" />
      <ByteCheck address="flash_start_address" offset="-1" expected="0x02" op="eq" />
      <ByteCheck address="flash_start_address" offset="2" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="3" expected="0x01" op="eq" />
      <ByteCheck address="flash_start_address" offset="4" expected="0x01" op="eq" />
      <ByteCheck address="flash_start_address" offset="5" expected="0x00" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Switches</Subcategory>
      <Name>MAP/MAF switch (0 = MAF, 257 = MAP) (XML)</Name>
      <ZAxis><Description>(0 = MAF, 257 = Intake Boost pressure, 1 = Intake Atm Pressure)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="107" id="left_foot_brake_switch">
    <Description>Left Foot Brake Switch (Legacy:780)</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-5" expected="0x27" op="eq" />
      <ByteCheck address="flash_start_address" offset="-4" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-3" expected="0x00" op="eq" />
      <ByteCheck address="flash_start_address" offset="-2" expected="0x64" op="eq" />
      <ByteCheck address="flash_start_address" offset="-1" expected="0x00" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Switches</Subcategory>
      <Name>Left Foot Brake Switch (1 = ON (default), O = OFF) (XML)</Name>
    </Metadata>
  </MapRule>

  <!-- 3. Start of Injection (SOI) - Repeat 10 -->
  <MapRule priority="108" id="soi_map_448_temp">
    <Description>
      Start of Injection (SOI) map - 16x14 dimension (448 bytes)
      Based on legacy EDC15PFileParser.cs:1402
    </Description>
    <Conditions>
      <Length>448</Length>
      <MapSelector numRepeats="10" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Fuel</Subcategory>
      <Name sequential="false" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="MapSelectorExists">
            <Template>Start of injection (SOI) {temperature} deg C (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Start of injection (SOI) (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>-0.023437</Correction>
      <Offset>78</Offset>
      <XAxis>
        <Description>IQ (mg/stroke)</Description>
        <Units>mg/st</Units>
        <Correction>0.01</Correction>
      </XAxis>
      <YAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </YAxis>
      <ZAxis>
        <Description>Start position (degrees BTDC)</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 3.1 Start IQ -->
  <MapRule priority="112" id="start_iq_generic">
    <Description>Start IQ maps (Legacy:2399, 2514, 2596)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>180</Length><XAxisLength>9</XAxisLength><YAxisLength>10</YAxisLength></Conditions>
        <Conditions><Length>162</Length><XAxisLength>9</XAxisLength><YAxisLength>9</YAxisLength></Conditions>
        <Conditions><Length>144</Length><XAxisLength>8</XAxisLength><YAxisLength>9</YAxisLength></Conditions>
      </Or>
      <XAxisID high="0xEC" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name sequential="true" baseName="Start IQ (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <XAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Requested IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 3.2 Fuel volume correction map -->
  <MapRule priority="115" id="fuel_volume_correction">
    <Description>Fuel volume correction map (mrwK_KF) (Legacy:2581)</Description>
    <Conditions>
      <Length>144</Length><XAxisLength>9</XAxisLength><YAxisLength>8</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name>Fuel volume correction map (XML)</Name>
      <Correction>0.002441</Correction>
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>IQ correction per 100K</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 3.3 Selector for injector duration -->
  <MapRule priority="118" id="injector_duration_selector">
    <Description>Selector for injector duration (Legacy:4983)</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xECB4" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name>Selector for injector duration (XML)</Name>
      <Correction>0.00390625</Correction>
      <XAxis><Description>Engine speed</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>SOI</Description><Units>°BTDC</Units><Correction>-0.023437</Correction><Offset>78</Offset></YAxis>
      <ZAxis><Description>Map index</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 4. Length 448 Corrections (Height, Dynamic, IAT) -->
  <MapRule priority="109" id="injection_height_corr_448">
    <Conditions>
      <Length>448</Length>
      <MapSelector numRepeats="6" />
      <XAxisID high="0xF9" /><YAxisID high="0xEB" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name sequential="true" baseName="Injection correction map (Height) (XML)" codeBlockScoped="true" />
      <Correction>0.023437</Correction>
      <XAxis><Description>Requested Quantity mg/stroke</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Duration (crankshaft degrees)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="110" id="injection_dynamic_advance_448">
    <Conditions>
      <Length>448</Length>
      <MapSelector numRepeats="5" />
      <XAxisID high="0xF9" /><YAxisID high="0xEB" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name sequential="true" baseName="Injection dynamic advance map (XML)" codeBlockScoped="true" />
      <Correction>0.023437</Correction><Offset>-78</Offset>
      <XAxis><Description>Requested Quantity mg/stroke</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Duration (crankshaft degrees)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="111" id="injection_iat_corr_448">
    <Conditions>
      <Length>448</Length>
      <MapSelector numRepeats="4" />
      <XAxisID high="0xF9" /><YAxisID high="0xEB" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Fuel</Subcategory>
      <Name sequential="true" baseName="Injection correction map (Air Temperature) (XML)" codeBlockScoped="true" />
      <Correction>0.023437</Correction>
      <XAxis><Description>Requested Quantity mg/stroke</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Duration (crankshaft degrees)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 5. Injector Duration (ID) - Generic lengths -->
  <MapRule priority="120" id="injector_duration_generic">
    <Description>
      Injector duration map - Various dimensions
      Based on legacy EDC15PFileParser.cs logic for multiple lengths.
      Higher priority rules handle SOI/BIP/etc. to avoid collisions.
    </Description>
    <Conditions>
      <Or>
        <Conditions>
          <Length>570</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>480</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>448</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>390</Length><XAxisLength>13</XAxisLength><YAxisLength>15</YAxisLength>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>360</Length><XAxisLength>12</XAxisLength><YAxisLength>15</YAxisLength>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>260</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>220</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>200</Length><AxisValueCheck axis="X" comparison="gt" value="3500" checkType="max" />
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>198</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>180</Length>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
        <Conditions>
          <Length>160</Length><XAxisLength>8</XAxisLength><YAxisLength>10</YAxisLength>
          <Or>
            <Conditions><XAxisID high="0xC5" /><YAxisID high="0xEC" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEA" /></Conditions>
            <Conditions><XAxisID high="0xC4" /><YAxisID high="0xEC" /></Conditions>
          </Or>
        </Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Fuel</Subcategory>
      <Name sequential="true" baseName="Injector duration (XML)" codeBlockScoped="true" />
      <Correction>0.023437</Correction>
      <XAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </XAxis>
      <YAxis>
        <Description>Requested Quantity mg/stroke</Description>
        <Units>mg/st</Units>
        <Correction>0.01</Correction>
      </YAxis>
      <ZAxis>
        <Description>Duration (crankshaft degrees)</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 6. Boost Target -->
  <MapRule priority="130" id="boost_target_320">
    <Description>
      Boost target map - 10x16 dimension (320 bytes)
    </Description>
    <Conditions>
      <Or>
        <Conditions><Length>320</Length></Conditions>
        <Conditions><Length>280</Length></Conditions>
      </Or>
      <Or>
        <Conditions><XAxisID high="0xEC" /><YAxisID high="0xC0" /></Conditions>
        <Conditions><XAxisID high="0xEA" /><YAxisID high="0xC0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Turbo</Subcategory>
      <Name>Boost target map (XML)</Name>
      <XAxis>
        <Description>IQ (mg/stroke)</Description>
        <Units>mg/st</Units>
        <Correction>0.01</Correction>
      </XAxis>
      <YAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </YAxis>
      <ZAxis>
        <Description>Boost target (mbar)</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7. Smoke Limiter / IQ by MAP/MAF Limiters (Length 416/384) -->
  <MapRule priority="140" id="smoke_limiter_generic">
    <Description>Smoke limiter (IQ by MAF) - Axis IDs: F9/DA or EA/DA (Legacy parser:1511, 1777)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>416</Length><XAxisID high="0xF9" /><YAxisID high="0xDA" /></Conditions>
        <Conditions><Length>384</Length><XAxisLength>16</XAxisLength><YAxisLength>12</YAxisLength><XAxisID high="0xEA" /><YAxisID high="0xDA" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Limiters</Subcategory>
      <Name sequential="false" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="MapSelectorExists">
            <Template>Smoke limiter {temperature} deg C (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Smoke limiter (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Airflow mg/stroke</Description><Units>mg/st</Units><Correction>0.1</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Maximum IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7.1 Torque Limiter -->
  <MapRule priority="142" id="torque_limiter_generic">
    <Description>Torque limiter (Legacy:3157, 3109, 3125...)</Description>
    <Conditions>
      <XAxisLength>3</XAxisLength>
      <Or>
        <Conditions><Length>150</Length><YAxisLength>25</YAxisLength></Conditions>
        <Conditions><Length>144</Length><YAxisLength>24</YAxisLength></Conditions>
        <Conditions><Length>138</Length><YAxisLength>23</YAxisLength></Conditions>
        <Conditions><Length>132</Length><YAxisLength>22</YAxisLength></Conditions>
        <Conditions><Length>126</Length><YAxisLength>21</YAxisLength></Conditions>
        <Conditions><Length>120</Length><YAxisLength>20</YAxisLength></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name sequential="true" baseName="Torque limiter (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Atm. pressure (mbar)</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Maximum IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7.2 Torque Limiter - Min map -->
  <MapRule priority="143" id="torque_limiter_min">
    <Description>Torque limiter - Min map (mrwADB_KF) (Legacy:5742)</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>2</XAxisLength><YAxisLength>2</YAxisLength>
      <XAxisID high="0xC2" /><YAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name sequential="true" baseName="Torque limiter - Min map (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <XAxis><Description>Speed/rpm ratio (km/h per rpm)</Description><Units>km/h/rpm</Units><Correction>0.0000390625</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Torque limit (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7.3 SOI Limiter (Temperature) -->
  <MapRule priority="146" id="soi_limiter_temp">
    <Description>SOI limiter (temperature) (Legacy:1945)</Description>
    <Conditions>
      <Length>308</Length><XAxisLength>14</XAxisLength><YAxisLength>11</YAxisLength>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>SOI limiter (temperature) (XML)</Name>
      <Correction>-0.023437</Correction><Offset>78</Offset>
      <XAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>SOI limit (degrees)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="145" id="iq_by_map_limiter">
    <Description>IQ by MAP limiter - Axis IDs: EC/DA, Max(Y) under 4000 (Legacy parser:1542)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>416</Length></Conditions>
        <Conditions><Length>320</Length></Conditions>
      </Or>
      <XAxisID high="0xEC" /><YAxisID high="0xDA" />
      <AxisValueCheck axis="Y" comparison="lt" value="4000" checkType="max" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>IQ by MAP limiter (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Boost pressure</Description><Units>mbar</Units></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Maximum IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="148" id="iq_by_maf_limiter">
    <Description>IQ by MAF limiter - Axis IDs: EC/DA, Max(Y) over 4000 (Legacy parser:1560)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>416</Length></Conditions>
        <Conditions><Length>384</Length></Conditions>
      </Or>
      <XAxisID high="0xEC" /><YAxisID high="0xDA" />
      <AxisValueCheck axis="Y" comparison="ge" value="4000" checkType="max" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>IQ by MAF limiter (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Airflow mg/stroke</Description><Units>mg/st</Units><Correction>0.1</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Maximum IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="150" id="inverse_driver_wish_384">
    <Description>Inverse driver wish - 12x16 dimension (384 bytes) (Legacy parser:1763)</Description>
    <Conditions>
      <Length>384</Length>
      <XAxisLength>12</XAxisLength>
      <YAxisLength>16</YAxisLength>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Inverse driver wish (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Throttle position</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="155" id="n75_duty_cycle_generic">
    <Description>N75 duty cycle map (Legacy parser:1575, 1604, 1677, 1867)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>416</Length></Conditions>
        <Conditions><Length>352</Length></Conditions>
      </Or>
      <XAxisID high="0xEC" />
      <Or>
        <Conditions><YAxisID high="0xEA" /></Conditions>
        <Conditions><YAxisID exact="0xE9D4" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Turbo</Subcategory>
      <Name>N75 duty cycle (XML)</Name>
      <Correction>-0.01</Correction><Offset>100</Offset>
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Duty cycle %</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7.3 MAF correction by temperature -->
  <MapRule priority="165" id="maf_correction_temp">
    <Description>MAF correction by temperature (Legacy:2640)</Description>
    <Conditions>
      <Length>128</Length><XAxisLength>8</XAxisLength><YAxisLength>8</YAxisLength>
      <Or>
        <Conditions><XAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID high="0xEA" /></Conditions>
      </Or>
      <YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name sequential="true" baseName="MAF correction by temperature (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <XAxis><Description>Intake air temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Limit</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 7.4 PID Control Maps -->
  <MapRule priority="166" id="pid_maps_generic">
    <Description>PID maps (I, D, DT1, P amplification) - Legacy:3899</Description>
    <Conditions>
      <Length>32</Length>
      <XAxisID high="0xC0" />
      <YAxisID exact="0x0000" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Turbo</Subcategory>
      <Name sequential="false" baseName="PID map" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>PID map - I amplification (ldwIRfakKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>PID map - D amplification (ldwDRfakKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>PID map - DT1 memory factor (ldwDR_gfKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="3">
            <Template>PID map - P amplification (ldwPRfakKL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>PID map {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.0001</Correction>
      <XAxis>
        <Description>Consumption (l/h)</Description>
        <Units>l/h</Units>
        <Correction>0.015022</Correction>
      </XAxis>
      <ZAxis>
        <Description>Output PID value multiplication</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="167" id="boost_actuator_upper_limit">
    <Description>Boost actuator upper limit curve (ldwDRmaxKL) - Legacy:3925</Description>
    <Conditions>
      <Length>32</Length>
      <XAxisID high="0xEC" />
      <YAxisID exact="0x0000" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Turbo</Subcategory>
      <Name>Boost actuator upper limit (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <ZAxis><Description>Actuator limit (%)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 8. EGR Map with Zero-Check -->
  <MapRule priority="160" id="egr_map_generic">
    <Description>EGR map with dimension checks to prevent collisions (Legacy parser:1620, 1745, 1808, 1852)</Description>
    <Conditions>
      <Or>
        <Conditions><Length>416</Length><XAxisLength>16</XAxisLength><YAxisLength>13</YAxisLength></Conditions>
        <Conditions><Length>390</Length><XAxisLength>15</XAxisLength><YAxisLength>13</YAxisLength></Conditions>
        <Conditions><Length>384</Length><XAxisLength>16</XAxisLength><YAxisLength>12</YAxisLength></Conditions>
        <Conditions><Length>352</Length><XAxisLength>16</XAxisLength><YAxisLength>11</YAxisLength></Conditions>
      </Or>
      <XAxisID high="0xEC" />
      <Or>
        <Conditions><YAxisID high="0xC0" /></Conditions>
        <Conditions><YAxisID high="0xE9" /></Conditions>
      </Or>
      <ByteCheck address="y_axis_address" offset="0" expected="0x00" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="EGR (XML)" codeBlockScoped="true" />
      <Correction>0.1</Correction>
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Mass Air Flow (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 9. Driver Wish Map -->
  <MapRule priority="200" id="driver_wish_generic">
    <Conditions>
      <Or>
        <Conditions><Length>286</Length><XAxisLength>13</XAxisLength><YAxisLength>11</YAxisLength></Conditions>
        <Conditions><Length>256</Length></Conditions>
        <Conditions><Length>240</Length><XAxisLength>12</XAxisLength><YAxisLength>10</YAxisLength></Conditions>
        <Conditions><Length>216</Length><XAxisLength>12</XAxisLength><YAxisLength>9</YAxisLength></Conditions>
        <Conditions><Length>192</Length><XAxisID high="0xEC" /><YAxisID high="0xC0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Driver wish (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Throttle position</Description><Units>TPS %</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Requested IQ (mg)</Description></ZAxis>
    </Metadata>
  </MapRule>


  <!-- 10. Expected Fuel Temp / Boost Correction -->
  <MapRule priority="215" id="boost_correction_water_temp">
    <Description>Boost correction by water temperature (ldwTW_KF) (Legacy parser:2673)</Description>
    <Conditions>
      <Length>128</Length><XAxisLength>8</XAxisLength><YAxisLength>8</YAxisLength>
      <Or>
        <Conditions><XAxisID high="0xEA" /></Conditions>
        <Conditions><XAxisID high="0xEB" /></Conditions>
      </Or>
      <YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Boost correction by water temperature (XML)</Name>
      <Correction>0.01</Correction>
      <!-- Axis descriptions swapped to match legacy parser viewer orientation -->
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Limitation of Boost (in %)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="216" id="expected_fuel_temp">
    <Description>Expected fuel temperature (zmwMKBT_KF) (Legacy parser:2709)</Description>
    <Conditions>
      <Length>128</Length><XAxisLength>8</XAxisLength><YAxisLength>8</YAxisLength>
      <XAxisID high="0xEC" />
      <YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Expected fuel temperature (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <XAxis><Description>IQ (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Fuel temperature °C</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 11. Fuel Temperature Protection -->
  <MapRule priority="220" id="fuel_temp_protection_mrwBKT">
    <Conditions>
      <Length>200</Length>
      <Or>
        <Conditions><XAxisID exact="0xC1AE" /><YAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID exact="0xC178" /><YAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID exact="0xC1BE" /><YAxisID high="0xEC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Fuel Temperature overheating protection map (mrwBKT_KF) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Fuel temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="222" id="fuel_temp_protection_mrwBTT">
    <Conditions>
      <Length>200</Length>
      <Or>
        <Conditions><XAxisID exact="0xC1CE" /><YAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID exact="0xC198" /><YAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID exact="0xC1DE" /><YAxisID high="0xEC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Fuel tank inlet temp overheat protection map (mrwBTT_KF) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Fuel temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 11.1 Turbo Protection / Limits -->
  <MapRule priority="225" id="overboost_debouncing">
    <Description>Overboost debouncing limit (zmwVETSuKF) (Legacy:2220)</Description>
    <Conditions>
      <Length>200</Length><XAxisLength>10</XAxisLength><YAxisLength>10</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Overboost debouncing limit (XML)</Name>
      <Correction>10</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Pressure of the boost overrrun (mbar)</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Turbo debouncing time (ms)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="228" id="overboost_protection_limit">
    <Description>Limit of overboost protection (zmwVEPLSKF) (Legacy:2207)</Description>
    <Conditions>
      <Length>200</Length><XAxisLength>10</XAxisLength><YAxisLength>10</YAxisLength>
      <XAxisID high="0xEC" />
      <Or>
        <Conditions><YAxisID high="0xC2" /></Conditions>
        <Conditions><YAxisID high="0xC1" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Limit of overboost protection (XML)</Name>
      <Correction>1</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>VNT Actuator Duty Cycle (%)</Description><Units>%</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Pressure limit (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 11.2 IQ by Air Intake Temp -->
  <MapRule priority="229" id="iq_by_iat">
    <Description>IQ by air intake temp (Legacy parser:4611)</Description>
    <Conditions>
      <Length min="18" max="70" />
      <!-- Legacy restricts to 0xC1Ax and 0xEC3x -->
      <Or>
        <Conditions><XAxisID exact="0xC1A6" /></Conditions>
        <Conditions><XAxisID exact="0xC1AC" /></Conditions>
      </Or>
      <YAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>IQ by air intake temp (XML)</Name>
      <Correction>0.01</Correction>
      <!-- Axis descriptions swapped to match legacy parser viewer orientation -->
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>%</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 12. Boost Limit Map -->
  <MapRule priority="230" id="boost_limit_200">
    <Conditions>
      <Description>Boost limit map - 10x10 dimension (200 bytes)</Description>
      <Or>
        <Conditions><Length>200</Length><XAxisLength>10</XAxisLength><YAxisLength>10</YAxisLength></Conditions>
        <Conditions><Length>180</Length><XAxisLength>9</XAxisLength><YAxisLength>10</YAxisLength></Conditions>
      </Or>
      <XAxisID high="0xC0" />
      <Or>
        <Conditions><YAxisID high="0xEC" /></Conditions>
        <Conditions><YAxisID high="0xEA" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Boost limit map (XML)</Name>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Atmospheric pressure (mbar)</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Maximum boost pressure (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 13. Boost correction by temperature -->
  <MapRule priority="240" id="boost_correction_temp_da">
    <Description>Boost correction by temperature (Legacy:6036)</Description>
    <Conditions>
      <XAxisID exact="0xDA6C" /><YAxisID exact="0xDA6A" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Limiters</Subcategory>
      <Name>Boost correction by temperature (XML)</Name>
      <XAxis><Description>IAT (celcius)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Requested boost</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Boost limit (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 14. Linearization Maps -->
  <MapRule priority="300" id="maf_linearization_64">
    <Description>MAF linearization - 32x1 (Legacy:3416)</Description>
    <Conditions>
      <Length>64</Length>
      <Or>
        <Conditions><XAxisID high="0xEB" /></Conditions>
        <Conditions><XAxisID high="0xE0" /></Conditions>
      </Or>
      <YAxisID exact="0x0000" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>MAF linearization (XML)</Name>
    </Metadata>
  </MapRule>

  <MapRule priority="305" id="map_linearization_4">
    <Description>MAP linearization - 2x1 (Legacy:5863)</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xEBA2" /></Conditions>
        <Conditions><XAxisID exact="0xEBA4" /></Conditions>
        <Conditions><XAxisID exact="0xE9BC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>MAP linearization (XML)</Name>
    </Metadata>
  </MapRule>

  <MapRule priority="310" id="oil_temp_sensor_linear">
    <Description>Oil temperature sensor linearization (anwOTF_KL) - Legacy:5886</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xEBC4" /></Conditions>
        <Conditions><XAxisID exact="0xEBC6" /></Conditions>
      </Or>
      <AxisValueCheck axis="X" comparison="gt" value="10" checkType="max" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Oil temperature sensor linearization (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>Voltage (mV)</Description><Units>mv</Units><Correction>4.8875855</Correction></YAxis>
      <ZAxis><Description>Oil Temperature (°C)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 15. Misc 2D Correction Maps -->
  <MapRule priority="330" id="idle_rpm_4">
    <Description>Idle RPM - 2x1 (Legacy:5869)</Description>
    <Conditions>
      <Length>4</Length>
      <XAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Idle RPM (XML)" codeBlockScoped="true" />
      <!-- Swapped to YAxis for legacy parity -->
      <YAxis><Description>Coolant temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Target engine speed</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="332" id="grid_table_fnwMEstzv">
    <Description>Grid table for duration quantity fnoM_E (fnwMEstzv) - Legacy:820</Description>
    <Conditions>
      <Length>28</Length><XAxisLength>14</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-40" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-39" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for duration quantity fnoM_E (fnwMEstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="333" id="grid_table_fnwWTstzv">
    <Description>Grid table for water temperaure fnmWTF (fnwWTstzv) - Legacy:821</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-72" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-71" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for water temperaure fnmWTF (fnwWTstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="334" id="grid_table_mrwLKstzv">
    <Description>Grid table for corrected airmass mroM_LK (mrwLKstzv) - Legacy:823</Description>
    <Conditions>
      <Length>26</Length><XAxisLength>13</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-40" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-39" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for corrected airmass mroM_LK (mrwLKstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Airmass (mg/stroke)</Description></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="332" id="grid_table_fnwMEstzv">
    <Description>Grid table for duration quantity fnoM_E (fnwMEstzv) - Legacy:820</Description>
    <Conditions>
      <Length>28</Length><XAxisLength>14</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-40" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-39" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for duration quantity fnoM_E (fnwMEstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="333" id="grid_table_fnwWTstzv">
    <Description>Grid table for water temperaure fnmWTF (fnwWTstzv) - Legacy:821</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-72" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-71" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for water temperaure fnmWTF (fnwWTstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="334" id="grid_table_mrwLKstzv">
    <Description>Grid table for corrected airmass mroM_LK (mrwLKstzv) - Legacy:823</Description>
    <Conditions>
      <Length>26</Length><XAxisLength>13</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0x0000" />
      <ByteCheck address="flash_start_address" offset="-40" expected="0x4A" op="eq" />
      <ByteCheck address="flash_start_address" offset="-39" expected="0xF9" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Grid table for corrected airmass mroM_LK (mrwLKstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Airmass (mg/stroke)</Description></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="335" id="oil_temp_overrun_corr">
    <Description>Oil temperature correction line for overrun (kuwNLOELKL) - Legacy:4681</Description>
    <Conditions>
      <Length>16</Length>
      <Or>
        <Conditions><XAxisID exact="0xC1B0" /></Conditions>
        <Conditions><XAxisID exact="0xC17A" /></Conditions>
        <Conditions><XAxisID exact="0xC1C0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Oil temp correction for overrun (XML)</Name>
      <Correction>0.02</Correction>
      <YAxis><Description>Oil temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction (s)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="340" id="glow_state_time_line">
    <Description>Glow intermediate glowing state time line (gswGS_T1ZG) - Legacy:5801</Description>
    <Conditions>
      <Length>6</Length>
      <Or>
        <Conditions><XAxisID exact="0xC19C" /></Conditions>
        <Conditions><XAxisID exact="0xC168" /></Conditions>
        <Conditions><XAxisID exact="0xC1AC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Glow intermediate state time (XML)</Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Air temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Wait time (s)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="345" id="ac_compressor_sw_off_line">
    <Description>AC Compressor water temperature switch-off limit line (klwWTab_KL) - Legacy:5813</Description>
    <Conditions>
      <Length>6</Length>
      <Or>
        <Conditions><XAxisID exact="0xC270" /></Conditions>
        <Conditions><XAxisID exact="0xC234" /></Conditions>
        <Conditions><XAxisID exact="0xC27E" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>AC Switch-off limit (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>Vehicle speed (km/h)</Description><Units>km/h</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Water temperature treshold (°C)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="350" id="smoke_map_selector_limiter">
    <Description>Limiter Smoke map selector / Pre-injection ramp-slope - Legacy:5827</Description>
    <Conditions>
      <Length>6</Length>
      <Or>
        <Conditions><XAxisID exact="0xC19E" /></Conditions>
        <Conditions><XAxisID exact="0xC16A" /></Conditions>
        <Conditions><XAxisID exact="0xC1AE" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Smoke selector / Pre-inj ramp (XML)" codeBlockScoped="true" />
      <YAxis><Description>Water temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
    </Metadata>
  </MapRule>

  <!-- 16. Protection and Correction Lines -->
  <MapRule priority="360" id="atm_pressure_corr_linear">
    <Description>Atmospheric pressure correction linearization (ldwLDBdPKL) - Legacy:5911</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xEC2E" /></Conditions>
        <Conditions><XAxisID exact="0xEC2C" /></Conditions>
        <Conditions><XAxisID exact="0xEC38" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Atm. pressure corr. linearization (XML)</Name>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Atmospheric pressure (mBar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="365" id="refrigerant_pressure_linear">
    <Description>Refrigerant pressure linearization (anwKMD_KL) - Legacy:5920</Description>
    <Conditions>
      <Length>4</Length><XAxisID exact="0xEBD8" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Refrigerant pressure linearization (XML)</Name>
      <Correction>0.002</Correction>
      <YAxis><Description>Raw duty cycle (%)</Description><Units>%</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Refrigerant pressure (Bar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="370" id="voltage_linearization_ubat_ref">
    <Description>Voltage linearization (anwUBAT_KL, anwREF_KL) - Legacy:5951</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xEB58" /></Conditions>
        <Conditions><XAxisID exact="0xEB5A" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Voltage linearization (XML)" codeBlockScoped="true" />
      <XAxis><Description>Fixed values</Description><Units>-</Units></XAxis>
      <ZAxis><Description>Linearized value</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="375" id="rme_fuel_iq_correction">
    <Description>RME Fuel IQ correction line (arwRME_KL) - Legacy:6000</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xE920" /></Conditions>
        <Conditions><XAxisID exact="0xE926" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>RME Fuel IQ correction (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Injection quantity (mg/stroke)</Description><Units>mgst</Units><Correction>0.01</Correction></XAxis>
      <ZAxis><Description>Corrected IQ (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="380" id="egr_motor_temp_corr_vp44">
    <Description>EGR Motor temperature correction pre-injection (VP44) - Legacy:6011</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xC042" /></Conditions>
        <Conditions><XAxisID exact="0xC048" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR Temp corr pre-inj (VP44) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Injection quantity (mg/stroke)</Description><Units>mgst</Units><Correction>0.01</Correction></XAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="385" id="brake_light_switch_linear">
    <Description>Brake light switch linearization (anwBRE_KL) - Legacy:5941</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xEBC2" /></Conditions>
        <Conditions><XAxisID exact="0xEBC4" /></Conditions>
      </Or>
      <AxisValueCheck axis="X" comparison="le" value="10" checkType="max" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Brake light switch linearization (XML)</Name>
      <YAxis><Description>Voltage (mV)</Description><Units>mv</Units><Correction>4.8875855</Correction></YAxis>
      <ZAxis><Description>Linearization (not active)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="390" id="gate_array_response">
    <Description>Gate array response (edwGAR_KL) - Legacy:5982</Description>
    <Conditions>
      <Length>4</Length><XAxisID exact="0xEB10" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Gate array response (XML)</Name>
      <XAxis><Description>fixed values</Description></XAxis>
      <ZAxis><Description>response</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="395" id="drag_torque_deactivation">
    <Description>Deactivation of drag torque limiter (mrwRSch_KL) - Legacy:5990</Description>
    <Conditions>
      <Length>4</Length>
      <Or>
        <Conditions><XAxisID exact="0xF94A" /></Conditions>
        <Conditions><XAxisID exact="0xF948" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Drag torque limiter deactivation (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <ZAxis><Description>Deactivation</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 17. Grid Tables -->
  <MapRule priority="300" id="fnwDZstzv">
    <Description>Grid table for speed input dzmNmit (fnwDZstzv) - Legacy:1084</Description>
    <Conditions>
      <Length>32</Length>
      <Or>
        <Conditions><XAxisID exact="0xF94A" /></Conditions>
        <Conditions><XAxisID exact="0x0000" /></Conditions>
      </Or>
      <ByteCheck address="flash_start_address" offset="0" expected="0x64" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Grid table for speed input dzmNmit (fnwDZstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Engine speed (rpm)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="301" id="mrwDZstzv">
    <Description>Grid table for speed input dzmNmit (mrwDZstzv) - Legacy:1139</Description>
    <Conditions>
      <Length>32</Length>
      <Or>
        <Conditions><XAxisID exact="0xF94A" /></Conditions>
        <Conditions><XAxisID exact="0x0000" /></Conditions>
      </Or>
      <ByteCheck address="flash_start_address" offset="0" expected="0x5D" op="eq" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Grid table for speed input dzmNmit (mrwDZstzv) (XML)</Name>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Engine speed (rpm)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="302" id="fnwMEstzv">
    <Description>Grid table for duration quantity fnoM_E (fnwMEstzv) - Legacy:1097</Description>
    <Conditions>
      <Length>28</Length>
      <XAxisID exact="0xEB66" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Grid table for duration quantity fnoM_E (fnwMEstzv) (XML)</Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="303" id="mrwLKstzv">
    <Description>Grid table for corrected airmass mroM_LK (mrwLKstzv) - Legacy:1152</Description>
    <Conditions>
      <Length>26</Length>
      <XAxisID exact="0xDA70" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Grid table for corrected airmass mroM_LK (mrwLKstzv) (XML)</Name>
      <Correction>0.1</Correction>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Airmass (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="304" id="fnwWTstzv">
    <Description>Grid table for water temperaure fnmWTF (fnwWTstzv) - Legacy:1111</Description>
    <Conditions>
      <Length>20</Length>
      <XAxisID exact="0xC5FE" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Grid table for water temperaure fnmWTF (fnwWTstzv) (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>Points</Description></YAxis>
      <ZAxis><Description>Injected Quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 18. EGR Basic Maps -->
  <MapRule priority="310" id="egr_basic_setpoint_vp44">
    <Description>EGR Basic-Setpoint map (VP44) - Legacy:5719</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>2</XAxisLength><YAxisLength>2</YAxisLength>
      <XAxisID high="0xEC" />
      <Or>
        <Conditions><YAxisID high="0xC0" /></Conditions>
        <Conditions><YAxisID exact="0xE918" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR Basic-Setpoint map (VP44) (XML)</Name>
      <Correction>0.1</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Injected quantity (mg/stroke)</Description><Units>mgst</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Target air quantity (mg/stroke air)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="311" id="egr_basic_actuator_2">
    <Description>EGR Basic-Control for actuator 2 map - Legacy:5711</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>2</XAxisLength><YAxisLength>2</YAxisLength>
      <XAxisID high="0xEC" />
      <Or>
        <Conditions><YAxisID high="0xC0" /></Conditions>
        <Conditions><YAxisID exact="0xE918" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="EGR Basic-Control (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Injected quantity (mg/stroke)</Description><Units>mgst</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Actuator Duty cycle (%)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 19. AG4 Transmission / mrw Maps -->
  <MapRule priority="320" id="mrw_ag4_maps">
    <Description>AG4 Transmission and Injected Fuel Correction maps - Legacy:2289</Description>
    <Conditions>
      <Length>200</Length><XAxisLength>10</XAxisLength><YAxisLength>10</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xF9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="mrw Map -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>mrw Map - AG4 Transmission downshift map (mrwM_ER_KF) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>mrw Map - AG4 Transmission upshift map (mrwM_EH_KF) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>mrw Map - Injected Fuel Volume Correction at 100°C (mrwKTB_KF) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>mrw Map - Unknown {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (RPM)</Description><Units>RPM</Units></XAxis>
      <YAxis><Description>Injected Quantity (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 20. Other Misc Maps -->
  <MapRule priority="330" id="starting_torque_quantity">
    <Description>Starting torque quantity characterization (mrwANFAHKL) - Legacy:4093</Description>
    <Conditions>
      <Length>22</Length><XAxisLength>11</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Starting torque quantity characterization (mrwANFAHKL) (XML)</Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Air flow (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="335" id="specific_consumption_can">
    <Description>Calculation of specific consumption (for CAN) (mrwKFVB_KF) - Legacy:2488</Description>
    <Conditions>
      <Length>176</Length><XAxisLength>8</XAxisLength><YAxisLength>11</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Calculation of specific consuption (for CAN) (mrwKFVB_KF) (XML)</Name>
      <Correction>0.0002</Correction>
      <XAxis><Description>Requested quantity (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>IQ to Nm ratio (mg/stroke/Nm)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="340" id="smoke_boost_compensation">
    <Description>Smoke/boost pressure compensation map (mrwKFPkorr) - Legacy:3967</Description>
    <Conditions>
      <Length>32</Length><XAxisLength>4</XAxisLength><YAxisLength>4</YAxisLength>
      <XAxisID high="0xC0" /><YAxisID high="0xDB" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Smoke/boost pressure compensation map (mrwKFPkorr) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Boost Pressure (mbar)</Description><Units>mbar</Units></XAxis>
      <YAxis><Description>Multiplicative factors</Description><Units>-</Units><Correction>0.0001</Correction></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="345" id="weighting_torque_correction">
    <Description>Weighting torque correction map (mrwKFTkorr) - Legacy:3690</Description>
    <Conditions>
      <Length>40</Length><XAxisLength>5</XAxisLength><YAxisLength>4</YAxisLength>
      <XAxisID high="0xC1" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Weighting torque correction map (mrwKFTkorr) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="350" id="asg_eco_torque_limiter">
    <Description>ASG-ECO Mode torque limiter (mrwBDB2_KL) - Legacy:4072</Description>
    <Conditions>
      <Length>24</Length><XAxisLength>12</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID high="0xEC" /></Conditions>
        <Conditions><XAxisID high="0xF9" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="ASG-ECO Mode torque limiter (XML)" codeBlockScoped="true" />
      <Correction>0.01</Correction>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="355" id="cvt_drag_torque">
    <Description>CVT Transmission drag torque limitation map - Legacy:3610</Description>
    <Conditions>
      <Length>50</Length><XAxisLength>5</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID high="0xC2" /><YAxisID high="0xF9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>CVT Transmission drag torque limitation map (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Speed (km/h)</Description><Units>kmh</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="360" id="altitude_speed_corr">
    <Description>Altitude dependent speed correction map (mrwBATM_KF) - Legacy:3581</Description>
    <Conditions>
      <Length>50</Length><XAxisLength>5</XAxisLength><YAxisLength>5</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1AA" /></Conditions>
        <Conditions><XAxisID exact="0xC174" /></Conditions>
      </Or>
      <YAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Altitude dependent speed correction map (mrwBATM_KF) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Atmospheric pressure (mBar)</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="365" id="oil_temp_overheat_prot">
    <Description>Oil temperature overheat protection map (mrwBOEL_KF) - Legacy:3598</Description>
    <Conditions>
      <Length>50</Length><XAxisLength>5</XAxisLength><YAxisLength>5</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1B0" /></Conditions>
        <Conditions><XAxisID exact="0xC17A" /></Conditions>
      </Or>
      <YAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Oil temperature overheat protection map (mrwBOEL_KF) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Oil temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="370" id="speed_dependent_misc_lines">
    <Description>Speed dependent misc lines (mrwBEM_KL, anwGFH51KL, ldwGRminKL, khwKH_ABKL) - Legacy:5115, 5108, 5101, 5087</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEC38" /></Conditions>
        <Conditions><XAxisID exact="0xEC2E" /></Conditions>
        <Conditions><XAxisID exact="0xEC2C" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Speed dependent -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>Speed dependent - IQ limit in case of error (mrwBEM_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>Speed dependent - Ratiometric factor (anwGFH51KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>Speed dependent - Boost actuator lower limit (ldwGRminKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="3">
            <Template>Speed dependent - Heating generator off threshold (khwKH_ABKL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Speed dependent - Unknown {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="375" id="water_temp_llr_integrator">
    <Description>Water temp dependent - LLR-Integrator initial value line (mrwSTINILL) - Legacy:4865</Description>
    <Conditions>
      <Length>14</Length><XAxisLength>7</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xC1AE" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water temp dependent - LLR-Integrator initial value (XML)</Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Water Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="380" id="acceleration_limitation">
    <Description>Acceleration limitation map (mrwBdn_KF) - Legacy:3267</Description>
    <Conditions>
      <Length>100</Length><XAxisLength>10</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID exact="0xDAA0" /><YAxisID exact="0xC1AE" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Acceleration limitation map (mrwBdn_KF) (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Water temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units><Correction>0.2384</Correction></YAxis>
      <ZAxis><Description>IQ Limit (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="385" id="permissible_heating_time">
    <Description>Permissible heating time map (mrwWTF_KL) - Legacy:3741</Description>
    <Conditions>
      <Length>40</Length><XAxisLength>20</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Permissible heating time map (mrwWTF_KL) (XML)</Name>
      <Correction>0.02</Correction>
      <YAxis><Description>Water temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Permissible time (s)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="390" id="boost_vacuum_detection_misc">
    <Description>Boost vacuum and small-quantity control lines - Legacy:4296, 4285, 4274, 4253, 4246</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEC38" /></Conditions>
        <Conditions><XAxisID exact="0xEC2E" /></Conditions>
        <Conditions><XAxisID exact="0xEC2C" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Boost/EGR Control -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>Boost intake manifold vacuum detection (mrwLDFU_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>EGR control small-quantity off (arwREG0KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>EGR control small-quantity on (arwREG1KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="5">
            <Template>Boost pressure control OFF threshold (ldwREG0WKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="6">
            <Template>Boost pressure control ON threshold (ldwREG1KL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Boost/EGR Control line {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="395" id="boost_vacuum_cancellation">
    <Description>Boost intake manifold vacuum state cancellation curve (mrwLDFO_KL) - Legacy:4496</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xF94A" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Boost intake manifold vacuum cancellation (XML)</Name>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Pressure difference (mbar)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 21. EGR Hysteresis / Shutdown -->
  <MapRule priority="400" id="egr_shutdown_hysteresis">
    <Description>EGR shutdown treshold hysteresis maps - Legacy:3746</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEC38" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="EGR shutdown treshold -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>EGR shutdown treshold - lower hysteresis (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>EGR shutdown treshold - upper hysteresis (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>EGR shutdown treshold - Unknown {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- Batch 1: Misc Maps (mrw/arw/fnw) -->
  
  <MapRule priority="300" id="oil_level_threshold">
    <Description>Oil level threshold map (mrwOELNiKF) - Legacy:3083</Description>
    <Conditions>
      <Length>128</Length><XAxisLength>8</XAxisLength><YAxisLength>8</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC0FC" /><YAxisID exact="0xC1B0" /></Conditions>
        <Conditions><XAxisID exact="0xC102" /><YAxisID exact="0xC1C0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Oil level threshold (XML)</Name>
      <XAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Minimum Oil Level</Description><Units>mm</Units></ZAxis>
      <Correction>0.25</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="305" id="egr_setpoint_height_corr_sequential">
    <Description>Pressure - EGR Setpoint height correction or SOI Selector (arwPAKORKL, fnwSWST_KL) - Legacy:5520, 5513</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>4</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC030" /></Conditions>
        <Conditions><XAxisID exact="0xC02C" /></Conditions>
        <Conditions><XAxisID exact="0xC034" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Pressure -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>EGR Setpoint height correction (arwPAKORKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>Pressure - Injection advance at start map selector (fnwSWST_KL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Pressure correction {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <YAxis><Description>Air pressure</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
      <ConditionalTemplate>
        <When conditionType="SequentialIndex" condition="0">
          <Correction>0.1</Correction>
        </When>
        <When conditionType="SequentialIndex" condition="1">
          <Correction>0.00390625</Correction>
        </When>
      </ConditionalTemplate>
    </Metadata>
  </MapRule>

  <MapRule priority="310" id="egr_temp_corr_target_vp44">
    <Description>EGR Engine temp correction - Target-value map (VP44) - Legacy:5690</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>2</XAxisLength><YAxisLength>2</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR Engine temp correction (Target VP44) (XML)</Name>
      <XAxis><Description>Engine speed</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Engine temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Target air quantity (mg/stroke air)</Description></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="315" id="egr_motor_temp_corr_curve">
    <Description>EGR Motor temperature correction characteristic curve (arwMEKORKL) - Legacy:5488</Description>
    <Conditions>
      <Length>10</Length><XAxisLength>5</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC042" /></Conditions>
        <Conditions><XAxisID exact="0xC048" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR Motor temp correction curve (XML)</Name>
      <YAxis><Description>Injected quantity</Description><Units>mgst</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Multiplicative correction factor</Description></ZAxis>
      <Correction>0.0001</Correction>
    </Metadata>
  </MapRule>


  <MapRule priority="325" id="egr_temp_drop_map">
    <Description>EGR- Engine temperature dependend drop map - Legacy:4812</Description>
    <Conditions>
      <Length>16</Length><XAxisLength>8</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1A2" /></Conditions>
        <Conditions><XAxisID exact="0xC1B2" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR- Engine temperature dependent drop (XML)</Name>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Rotations since start</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="330" id="engine_temp_starter_motor">
    <Description>Engine temp dependent - Starter motor characteristic maps - Legacy:5345, 5346</Description>
    <Conditions>
      <Length>10</Length><XAxisLength>5</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1A2" /></Conditions>
        <Conditions><XAxisID exact="0xC16C" /></Conditions>
        <Conditions><XAxisID exact="0xC1B2" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Engine temp dependent - Starter motor (XML)" codeBlockScoped="true" />
      <YAxis><Description>Engine temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Engine speed</Description><Units>rpm</Units></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="335" id="starting_iq_delay">
    <Description>Delay - Starting IQ after startup (mrwSTMFRKL) - Legacy:4457</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1A2" /></Conditions>
        <Conditions><XAxisID exact="0xC16C" /></Conditions>
        <Conditions><XAxisID exact="0xC1B2" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Delay - Starting IQ after startup (XML)</Name>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Time</Description><Units>s</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="340" id="pedal_position_linearization">
    <Description>Pedal position linearization map (mrwADR_KL) - Legacy:4799</Description>
    <Conditions>
      <Length>16</Length><XAxisLength>8</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1B8" /></Conditions>
        <Conditions><XAxisID exact="0xC182" /></Conditions>
        <Conditions><XAxisID exact="0xC1C8" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Pedal position linearization (XML)</Name>
      <YAxis><Description>Pedal position</Description><Units>%</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Engine speed</Description><Units>rpm</Units></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="345" id="generator_load_torque_loss">
    <Description>Generator load torque loss map (mrwDFMD_KF) - Legacy:3292</Description>
    <Conditions>
      <Length>98</Length><XAxisLength>7</XAxisLength><YAxisLength>7</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Generator load torque loss (XML)</Name>
      <XAxis><Description>Engine speed</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Generator load</Description><Units>%</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Torque loss</Description><Units>nm</Units></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="350" id="water_temp_load_iq_increase">
    <Description>Water temperature dependent load IQ increase - Legacy:3221</Description>
    <Conditions>
      <Length>120</Length><XAxisLength>10</XAxisLength><YAxisLength>6</YAxisLength>
      <XAxisID high="0xEC" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water temperature dependent load IQ increase (XML)</Name>
      <XAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>IQ</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="355" id="water_temp_full_load_correction">
    <Description>Water temp full load increase correction map (mrwBPL_KF) - Legacy:3715</Description>
    <Conditions>
      <Length>40</Length><XAxisLength>4</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID high="0xC1" /><YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water temp full load increase correction (XML)</Name>
      <XAxis><Description>Air pressure</Description><Units>mbar</Units></XAxis>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction factor</Description></ZAxis>
      <Correction>0.0001</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="320" id="altitude_pressure_misc_6x1">
    <Description>Altitude dependent maps (EGR, Smoke ramps, SOI selector) - Legacy:5034, 5020, 5027, 5016</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC030" /></Conditions>
        <Conditions><XAxisID exact="0xC034" /></Conditions>
        <Conditions><XAxisID exact="0xC02C" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Altitude dependent -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>Altitude dependent - EGR setpoint (arwPSKORKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>Altitude dependent - Smoke turbo boost positive ramp (mrwTSADpKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>Altitude dependent - Smoke turbo boost negative ramp (mrwTSADnKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="3">
            <Template>Altitude dependent - SOI Pressure correction map selector (fnwSWAD_KL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Altitude dependent - Unknown {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <YAxis><Description>Altitude pressure</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
      <ConditionalTemplate>
        <When conditionType="SequentialIndex" condition="0"><Correction>0.1</Correction></When>
        <When conditionType="SequentialIndex" condition="1"><Correction>0.5</Correction></When>
        <When conditionType="SequentialIndex" condition="2"><Correction>0.5</Correction></When>
        <When conditionType="SequentialIndex" condition="3"><Correction>0.00390625</Correction></When>
      </ConditionalTemplate>
    </Metadata>
  </MapRule>

  <MapRule priority="365" id="ard_ramp_rate_load_change">
    <Description>ARD Ramp rate load change maps - Legacy:3311, 3318</Description>
    <Conditions>
      <Length>80</Length><XAxisLength>8</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID high="0xF9" /><YAxisID high="0xE9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="ARD Ramp rate load change (XML)" codeBlockScoped="true" />
      <XAxis><Description>Selected gear</Description><Units>gear</Units></XAxis>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>mg/stroke per second</Description></ZAxis>
      <Correction>0.15</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="370" id="ard_shaper_gradient_sequential">
    <Description>Map- ARD shaper and misc 8x1 lines - Legacy:4752, 4745, 4739, 4732, 4728, 4713, 4709, 4702</Description>
    <Conditions>
      <Length>16</Length><XAxisLength>8</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xF9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Misc 8x1 -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>Map- ARD shaper gradient bandwidth neg trend - pos offset (mrwFNoO_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>Map- ARD shaper gradient bandwidth neg trend - neg offset (mrwFNoU_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>Map- ARD shaper gradient bandwidth pos trend - pos offset (mrwFPoO_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="3">
            <Template>Map- ARD shaper gradient bandwidth pos trend - neg offset (mrwFPoU_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="4">
            <Template>Map- Boost shutdown freezing time characteristic (ldwVZDZ_KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="5">
            <Template>Map- EGR cooler bypass switch-on line (arwERGnEin) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="6">
            <Template>Map- EGR cooler bypass switch-off line (arwERGnAus) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="7">
            <Template>Map- Cooler water temp speed correction line (kuwKOR1_KL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Misc 8x1 line {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
      <ConditionalTemplate>
        <When conditionType="SequentialIndex" condition="0"><Correction>0.01</Correction></When>
        <When conditionType="SequentialIndex" condition="1"><Correction>0.01</Correction></When>
        <When conditionType="SequentialIndex" condition="2"><Correction>0.01</Correction></When>
        <When conditionType="SequentialIndex" condition="3"><Correction>0.01</Correction></When>
        <When conditionType="SequentialIndex" condition="4"><Correction>0.0001</Correction></When>
        <When conditionType="SequentialIndex" condition="5"><Correction>0.1</Correction></When>
        <When conditionType="SequentialIndex" condition="6"><Correction>0.1</Correction></When>
        <When conditionType="SequentialIndex" condition="7"><Correction>0.0001</Correction></When>
      </ConditionalTemplate>
    </Metadata>
  </MapRule>

  <MapRule priority="375" id="ard_disturbance_controller">
    <Description>ARD Disturbance controller maps - Legacy:5454, 5460, 5467, 5473</Description>
    <Conditions>
      <Length>10</Length><XAxisLength>5</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC0FC" /></Conditions>
        <Conditions><XAxisID exact="0xC0EE" /></Conditions>
        <Conditions><XAxisID exact="0xC102" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="ARD Disturbance controller (XML)" codeBlockScoped="true" />
      <YAxis><Description>ARD Filtered speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Amount of intervention</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="380" id="load_impact_detection">
    <Description>Load impact detection speed/gear maps - Legacy:3560, 3567</Description>
    <Conditions>
      <Length>50</Length><XAxisLength>5</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID high="0xF9" /><YAxisID high="0xE9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Load impact detection speed/gear map (XML)" codeBlockScoped="true" />
      <XAxis><Description>Engine speed</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Selected gear</Description><Units>gear</Units></YAxis>
      <ZAxis><Description>Injected Quantity</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="385" id="torque_moment_behavior">
    <Description>Torque moment driving behavior map (mrwFGFVHKF) - Legacy:2371</Description>
    <Conditions>
      <Length>192</Length><XAxisLength>12</XAxisLength><YAxisLength>8</YAxisLength>
      <XAxisID high="0xC2" /><YAxisID high="0xC0" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Torque moment driving behavior (XML)</Name>
      <XAxis><Description>Throttle position</Description><Units>TPS %</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Vehicle speed</Description><Units>km/h</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Torque</Description><Units>nm</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="390" id="conversion_filter">
    <Description>Conversion filter characteristic map (mrwFVHFIKL) - Legacy:5259</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xDABC" /></Conditions>
        <Conditions><XAxisID exact="0xDAC0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Conversion filter characteristic (XML)</Name>
      <YAxis><Description>Powertrain factor</Description></YAxis>
      <ZAxis><Description>Value</Description></ZAxis>
      <Correction>0.000030517578</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="395" id="water_temp_deviation_transmission">
    <Description>Water temp dependent - Max deviation internal/external transmission - Legacy:4858</Description>
    <Conditions>
      <Length>14</Length><XAxisLength>7</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC19E" /></Conditions>
        <Conditions><XAxisID exact="0xC1AE" /></Conditions>
        <Conditions><XAxisID exact="0xC16A" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water temp dependent - Transmission deviation (XML)</Name>
      <YAxis><Description>Water Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Deviation</Description></ZAxis>
      <Correction>0.0001</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="410" id="desired_speed_can">
    <Description>Desired speed message to transmission via CAN (mrwBCV_KF) - Legacy:2263</Description>
    <Conditions>
      <Length>200</Length><XAxisLength>10</XAxisLength><YAxisLength>10</YAxisLength>
      <XAxisID high="0xC2" /><YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Desired speed via CAN (XML)</Name>
      <XAxis><Description>none</Description></XAxis>
      <YAxis><Description>Speed</Description><Units>km/h</Units><Correction>0.01</Correction></YAxis>
      <Correction>0.0001</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="415" id="kienzle_tachograph">
    <Description>Kienzle tachograph route factor characteristic curve (fgwSF_KL) - Legacy:5241</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEBE8" /></Conditions>
        <Conditions><XAxisID exact="0xEBEA" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Kienzle tachograph route factor (XML)</Name>
      <YAxis><Description>Time</Description><Units>uS</Units></YAxis>
      <ZAxis><Description>Imp/m</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="420" id="rme_sensor_linearization">
    <Description>RME Sensor linearization map (anwRME_KL) - Legacy:4586</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEB98" /></Conditions>
        <Conditions><XAxisID exact="0xEB9A" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>RME Sensor linearization (XML)</Name>
      <YAxis><Description>Voltage</Description><Units>mv</Units><Correction>4.8875855</Correction></YAxis>
      <ZAxis><Description>Sensor</Description><Units>%</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="425" id="atm_pressure_linearization_sensor">
    <Description>Atmospheric pressure linearization map (anwBRE_KL) - Legacy:5972</Description>
    <Conditions>
      <Length>4</Length><XAxisLength>2</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEBA6" /></Conditions>
        <Conditions><XAxisID exact="0xEBA8" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Atmospheric pressure linearization (XML)</Name>
      <YAxis><Description>Voltage</Description><Units>mv</Units><Correction>4.8875855</Correction></YAxis>
      <ZAxis><Description>Atmospheric pressure</Description><Units>mBar</Units></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="430" id="ratiometric_hfm5_line">
    <Description>Ratiometric processing memory factor HFM5 line (anwGFH51KL) - Legacy:5108</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEC38" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Ratiometric HFM5 factor (XML)</Name>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <Correction>0.000030517578</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="435" id="adc_linearization_line">
    <Description>Analog/digital converter linearization map (anwTAD_KL) - Legacy:5931</Description>
    <Conditions>
      <Length>4</Length><XAxisLength>2</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEB9E" /></Conditions>
        <Conditions><XAxisID exact="0xEBA0" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>ADC linearization (XML)</Name>
      <YAxis><Description>Voltage</Description><Units>mv</Units><Correction>4.8875855</Correction></YAxis>
      <ZAxis><Description>Linearization</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="440" id="fuel_temp_correction_line">
    <Description>Fuel temperature correction curve (zmwMKorKL) - Legacy:4562</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEC5E" /></Conditions>
        <Conditions><XAxisID exact="0xEC5C" /></Conditions>
        <Conditions><XAxisID exact="0xEC68" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Fuel temp correction (XML)</Name>
      <YAxis><Description>Fuel Temperature</Description><Units>°C</Units><Correction>0.1</Correction></YAxis>
      <ZAxis><Description>Corrected fuel Temperature</Description><Units>°C</Units></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="445" id="camshaft_torsion_correction">
    <Description>Twisted camshaft torsion correction angle map (zmwNWkoKL) - Legacy:4834</Description>
    <Conditions>
      <Length>14</Length><XAxisLength>7</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC5E0" /></Conditions>
        <Conditions><XAxisID exact="0xC57C" /></Conditions>
        <Conditions><XAxisID exact="0xC5FC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Camshaft torsion correction (XML)</Name>
      <YAxis><Description>Camshaft position</Description><Units>°</Units><Correction>0.0234375</Correction></YAxis>
      <ZAxis><Description>Correction</Description><Units>°</Units></ZAxis>
      <Correction>0.0234375</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="450" id="bip_startup_max_battery_line">
    <Description>BIP Start-up max Battery voltage dependent line (zmwBPAnIKL) - Legacy:5230</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC5BA" /></Conditions>
        <Conditions><XAxisID exact="0xC556" /></Conditions>
        <Conditions><XAxisID exact="0xC5D6" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>BIP Start-up max Battery voltage (XML)</Name>
      <YAxis><Description>Battery Voltage</Description><Units>V</Units><Correction>0.020372434</Correction></YAxis>
      <ZAxis><Description>Maximum Amps driveable by Injector</Description><Units>A</Units></ZAxis>
      <Correction>0.03329423</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="455" id="min_iq_control_thresholds">
    <Description>Minimum IQ control thresholds (zmwMEmi0KL, zmwMEmi1KL) - Legacy:4482, 4489</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xF94A" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Minimum IQ control threshold (XML)" codeBlockScoped="true" />
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="460" id="smooth_running_lrr_limit">
    <Description>Smooth-running controler LRR limiting characteristic (mrwLRR_BGR) - Legacy:5583</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>4</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC082" /></Conditions>
        <Conditions><XAxisID exact="0xC07E" /></Conditions>
        <Conditions><XAxisID exact="0xC088" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Smooth-running LRR limiting (XML)</Name>
      <YAxis><Description>Injected quantity</Description><Units>mg/st</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Injected quantity</Description><Units>mg/st</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="465" id="egr_shutdown_timed_map">
    <Description>EGR Shutdown timed threshold map (arwMEAB2KL) - Legacy:3728</Description>
    <Conditions>
      <Length>40</Length><XAxisLength>20</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xF9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="EGR Shutdown timed threshold (XML)" codeBlockScoped="true" />
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="470" id="delayed_shutdown_time_map">
    <Description>Map - time for delayed shutdown (arwTi_abKL) - Legacy:4476</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xF9" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Delayed shutdown time (XML)</Name>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Time</Description><Units>s</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="475" id="delay_egr_start_line">
    <Description>Delay - EGR start time after startup (anwANSTWKL) - Legacy:4450</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1A2" /></Conditions>
        <Conditions><XAxisID exact="0xC16C" /></Conditions>
        <Conditions><XAxisID exact="0xC1B2" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Delay - EGR start time (XML)</Name>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Time</Description><Units>s</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="480" id="egr_air_linearization_map">
    <Description>EGR Air linearization map (arwLMBLIKL) - Legacy:4036</Description>
    <Conditions>
      <Length>26</Length><XAxisLength>13</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xE91E" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>EGR Air linearization (XML)</Name>
      <YAxis><Description>MAF sensor raw value</Description><Units>%</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Air flow</Description><Units>kg/h</Units></ZAxis>
      <Correction>0.1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="485" id="egr_control_small_qty">
    <Description>EGR control small-quantity characteristic lines - Legacy:4274, 4285</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEC38" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="EGR control small-quantity (XML)" codeBlockScoped="true" />
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="490" id="boost_threshold_ldwREG_line">
    <Description>Boost pressure control thresholds - Legacy:4246, 4253</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEC38" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Boost control threshold (XML)" codeBlockScoped="true" />
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="495" id="ard_limitation_offset_line">
    <Description>ARD limitation offset for limiting amount (mrwABegOKL) - Legacy:5409</Description>
    <Conditions>
      <Length>10</Length><XAxisLength>5</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEC2E" /></Conditions>
        <Conditions><XAxisID exact="0xEC2C" /></Conditions>
        <Conditions><XAxisID exact="0xEC38" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>ARD limitation offset (XML)</Name>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Injected quantity offset</Description><Units>mg/stroke</Units></ZAxis>
      <Correction>0.01</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="500" id="idle_start_speed_line">
    <Description>Engine temperature-dependent idle start speed curve (mrwLLW_KL) - Legacy:5228</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC1A2" /></Conditions>
        <Conditions><XAxisID exact="0xC16C" /></Conditions>
        <Conditions><XAxisID exact="0xC1B2" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Idle start speed curve (XML)</Name>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Engine speed</Description><Units>rpm</Units></ZAxis>
    </Metadata>
  </MapRule>

  <!-- VCDS Diagnostic Limits -->
  
  <MapRule priority="600" id="vcds_diag_iq_limit_1">
    <Description>VCDS Diagnostic IQ Limit 1 - Signature based - Legacy:4240</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-12" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-11" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-10" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-9" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-8" expected="0x01" />
      <ByteCheck address="flash_start_address" offset="-7" expected="0x69" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic IQ Limit 1 (XML)</Name>
      <Correction>0.00390625</Correction>
      <Offset>-0.15234375</Offset>
      <XAxis><Description>IQ Limit in mg/st (whole numbers only!)</Description><Units>mg</Units></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="601" id="vcds_diag_iq_limit_2">
    <Description>VCDS Diagnostic IQ Limit 2 - Signature based - Legacy:4254</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-56" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-55" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-54" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-53" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-52" expected="0x01" />
      <ByteCheck address="flash_start_address" offset="-51" expected="0x69" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic IQ Limit 2 (XML)</Name>
      <Correction>0.00390625</Correction>
      <Offset>-0.15234375</Offset>
      <XAxis><Description>IQ Limit in mg/st (whole numbers only!)</Description><Units>mg</Units></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="602" id="vcds_diag_map_limit_1">
    <Description>VCDS Diagnostic MAP Limit 1 - Signature based - Legacy:4608</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-28" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-27" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-26" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-25" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-24" expected="0x01" />
      <ByteCheck address="flash_start_address" offset="-23" expected="0x69" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic MAP Limit 1 (XML)</Name>
      <XAxis><Description>MAP Limit in mbar</Description></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="605" id="vcds_diag_map_limit_3">
    <Description>VCDS Diagnostic MAP Limit 3 - Signature based - Legacy:4636</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-72" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-71" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-70" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-69" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-68" expected="0x01" />
      <ByteCheck address="flash_start_address" offset="-67" expected="0x69" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic MAP Limit 3 (XML)</Name>
      <XAxis><Description>MAP Limit in mbar</Description></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="606" id="vcds_diag_maf_limit_1">
    <Description>VCDS Diagnostic MAF Limit 1 - Signature based - Legacy:4579</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-24" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-23" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-22" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-21" expected="0xFF" />
      <ByteCheck address="flash_start_address" offset="-20" expected="0x01" />
      <ByteCheck address="flash_start_address" offset="-19" expected="0x69" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic MAF Limit 1 (XML)</Name>
      <Correction>0.025</Correction>
      <Offset>-1.225</Offset>
      <XAxis><Description>MAF Limit in mg/h (scaled)</Description><Units>mg/h</Units></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="620" id="vcds_diag_iq_offset">
    <Description>VCDS Diagnostic IQ Display offset - Legacy:4725</Description>
    <Conditions>
      <Length>2</Length>
      <ByteCheck address="flash_start_address" offset="-138" expected="0xD4" />
      <ByteCheck address="flash_start_address" offset="-137" expected="0xFE" />
      <ByteCheck address="flash_start_address" offset="-136" expected="0x91" />
      <ByteCheck address="flash_start_address" offset="-135" expected="0x00" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>VCDS Diagnostic IQ Display offset (XML)</Name>
      <XAxis><Description>IQ Display offset calculation factor</Description></XAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="550" id="diag_meas_blocks_190">
    <Description>Measurement Blocks 190-199 values - Legacy:2068</Description>
    <Conditions>
      <Length>220</Length><XAxisLength>10</XAxisLength><YAxisLength>11</YAxisLength>
      <XAxisID exact="0xE99E" /><YAxisID exact="0xE99C" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Diagnostics</Subcategory>
      <Name>Measurement Blocks 190-199 values (XML)</Name>
      <Offset>-3840</Offset>
      <XAxis><Description>Measurement block number</Description></XAxis>
      <YAxis><Description>Diagnostic Value Slot number</Description></YAxis>
      <ZAxis><Description>Diagnostic Value Type (ID)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="560" id="injector_dyn_adv_selector">
    <Description>Injector dynamic advance selector map (fnwSWDY_KL) - Legacy:5319</Description>
    <Conditions>
      <Length>10</Length><XAxisLength>5</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xC5" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Injector dynamic advance selector (XML)</Name>
      <YAxis><Description>Water Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Dynamic advance map selected</Description></ZAxis>
      <Correction>0.00390625</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="565" id="soi_map_selector">
    <Description>Selector for start of injection map (fnwSWGK_KL) - Legacy:4152</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>10</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID high="0xC5" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Selector for start of injection (XML)</Name>
      <YAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Selected Map</Description></ZAxis>
      <Correction>0.00390625</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="570" id="soi_pressure_corr_selector">
    <Description>Altitude dependent - SOI Pressure correction map selector (fnwSWAD_KL) - Legacy:5016</Description>
    <Conditions>
      <Length>12</Length><XAxisLength>6</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xC034" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>SOI Pressure correction map selector (XML)</Name>
      <YAxis><Description>Altitude pressure</Description><Units>mbar</Units></YAxis>
      <ZAxis><Description>fnwSWADxKR map</Description></ZAxis>
      <Correction>0.00390625</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="575" id="injection_advance_at_start_map">
    <Description>Injection advance at start maps - Legacy:3187</Description>
    <Conditions>
      <Length>120</Length><XAxisLength>6</XAxisLength><YAxisLength>10</YAxisLength>
      <XAxisID high="0xF9" /><YAxisID high="0xC5" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="true" baseName="Injection advance at start map (XML)" codeBlockScoped="true" />
      <XAxis><Description>Temperature</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Crankshaft degrees</Description><Units>°</Units></ZAxis>
      <Correction>0.0234375</Correction><Offset>-78</Offset>
    </Metadata>
  </MapRule>

  <!-- Batch 2: Missing Maps from Legacy Parser -->

  <!-- 22. ARD drivers wish limiter line (mrwFFBgrKL) -->
  <MapRule priority="400" id="ard_drivers_wish_limiter_mrwFFBgrKL">
    <Description>ARD drivers wish limiter line (mrwFFBgrKL) - Legacy:5612</Description>
    <Conditions>
      <Length>8</Length>
      <XAxisLength>4</XAxisLength>
      <YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xF94A" /></Conditions>
        <Conditions><XAxisID exact="0xF948" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>ARD drivers wish limiter line (mrwFFBgrKL) (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <ZAxis><Description>Injected quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 23. Air conditioning torque requirement map (mrwKLMD_KF) -->
  <MapRule priority="405" id="air_conditioning_torque_mrwKLMD_KF">
    <Description>Air conditioning torque requirement map (mrwKLMD_KF) - Legacy:3982</Description>
    <Conditions>
      <Length>32</Length>
      <XAxisLength>4</XAxisLength>
      <YAxisLength>4</YAxisLength>
      <XAxisID high="0xF9" />
      <YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Air conditioning torque requirement map (mrwKLMD_KF) (XML)</Name>
      <Correction>0.1</Correction>
      <XAxis>
        <Description>Engine speed (rpm)</Description>
        <Units>rpm</Units>
      </XAxis>
      <YAxis>
        <Description>Temperature (°C)</Description>
        <Units>°C</Units>
        <Correction>0.1</Correction>
        <Offset>-273.1</Offset>
      </YAxis>
      <ZAxis>
        <Description>Torque loss due to air conditioning (NM)</Description>
      </ZAxis>
    </Metadata>
  </MapRule>

  <!-- 24. MAF airmass correction by temperature -->
  <MapRule priority="410" id="maf_airmass_correction_temp">
    <Description>MAF airmass correction by temperature - Legacy:1926</Description>
    <Conditions>
      <Length>320</Length>
      <XAxisLength>16</XAxisLength>
      <YAxisLength>10</YAxisLength>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>MAF airmass correction by temperature (XML)</Name>
      <Correction>0.1</Correction>
      <XAxis><Description>Temperature (celsius)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Airflow (mg/stroke)</Description><Units>mgst</Units><Correction>0.1</Correction></YAxis>
      <ZAxis><Description>Corrected Airflow (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 25. IAT dependent- Smoke/Boost correction (mrwTSTLKL) -->
  <MapRule priority="415" id="iat_dependent_smoke_boost_mrwTSTLKL">
    <Description>IAT dependent- Smoke/Boost correction (mrwTSTLKL) - Legacy:4922, 4961</Description>
    <Conditions>
      <Length>14</Length>
      <XAxisLength>7</XAxisLength>
      <YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xC19C" /></Conditions>
        <Conditions><XAxisID exact="0xC168" /></Conditions>
        <Conditions><XAxisID exact="0xC1AC" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>IAT dependent- Smoke/Boost correction (mrwTSTLKL) (XML)</Name>
      <Correction>0.0001</Correction>
      <XAxis><Description>Air Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <ZAxis><Description>Value</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 26. Unknown 3x4 map (IDs: C1DC / C27E) -->
  <MapRule priority="420" id="unknown_3x4_map_c1dc_c27e">
    <Description>Map :3 x 4 IDs: X 49628 (C1DC) Y 49790 (C27E)</Description>
    <Conditions>
      <Length>24</Length>
      <XAxisLength>3</XAxisLength>
      <YAxisLength>4</YAxisLength>
      <XAxisID exact="0xC1DC" />
      <YAxisID exact="0xC27E" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Map 3x4 (C1DC/C27E) (XML)</Name>
    </Metadata>
  </MapRule>

  <!-- 27. CAN Desired engine speed map -->
  <MapRule priority="425" id="can_desired_engine_speed">
    <Description>CAN Desired engine speed map - Legacy:3206</Description>
    <Conditions>
      <Length>120</Length>
      <XAxisLength>6</XAxisLength>
      <YAxisLength>10</YAxisLength>
      <XAxisID high="0xC1" />
      <YAxisID high="0xC1" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>CAN Desired engine speed map (XML)</Name>
      <XAxis><Description>Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></YAxis>
      <ZAxis><Description>Speed (rpm)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 28. PGS linearization (not active) (anwPGS_KL) -->
  <MapRule priority="430" id="pgs_linearization_anwPGS_KL">
    <Description>PGS linearization (not active) (anwPGS_KL) - Legacy:5602</Description>
    <Conditions>
      <Length>8</Length>
      <XAxisLength>4</XAxisLength>
      <YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEB9A" /></Conditions>
        <Conditions><XAxisID exact="0xEB9C" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>PGS linearization (not active) (anwPGS_KL) (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Voltage (mV)</Description><Units>mV</Units><Correction>4.8875855</Correction></XAxis>
      <ZAxis><Description>%</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 29. Advanced thrust characteristic map (mrwSCHUPKL) -->
  <MapRule priority="435" id="advanced_thrust_mrwSCHUPKL">
    <Description>Advanced thrust characteristic map (mrwSCHUPKL) - Legacy:3479</Description>
    <Conditions>
      <Length>50</Length>
      <XAxisLength>25</XAxisLength>
      <YAxisLength>1</YAxisLength>
      <XAxisID high="0xEC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category>
      <Subcategory>Misc</Subcategory>
      <Name>Advanced thrust characteristic map (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <ZAxis><Description>Temperature corrected taget quantity (mg/stroke)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 30. Cooling System Maps (8x8, 128 bytes) -->
  <MapRule priority="450" id="cooling_kuwSOLL1KF">
    <Conditions><Length>128</Length><XAxisID exact="0xF94A" /><YAxisID exact="0xF944" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water temperature basic setpoint - target will map 1 (kuwSOLL1KF) (XML)</Name>
      <XAxis><Description>Injected Quantity (mg/stroke)</Description><Units>mg/st</Units><Correction>0.01</Correction></XAxis>
      <YAxis><Description>Engine speed (RPM)</Description><Units>RPM</Units></YAxis>
      <ZAxis><Description>Load-dependent output Temperature (°C)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="451" id="cooling_kuwSOLL2KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC1DC" /><YAxisID exact="0xE9CC" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Load-dependend pre control cooling will map 2 (kuwSOLL2KF) (XML)</Name>
      <XAxis><Description>Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>water Temperature setpoint (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Load-dependent output Temperature (°C)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="452" id="cooling_kuwSOLL3KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC1C6" /><YAxisID exact="0xC1DC" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Setpoint temperature difference will map 3 (kuwSOLL3KF) (XML)</Name>
      <XAxis><Description>Ambient Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Cylinder head water Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Setpoint temperature difference (°C)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="453" id="cooling_kuwSOLL4KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC13C" /><YAxisID exact="0xEA16" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Relative dynamic cooling requirement will map 4 (kuwSOLL4KF) (XML)</Name>
      <XAxis><Description>Water Temperature difference (°C)</Description><Units>°C</Units><Correction>0.1</Correction></XAxis>
      <YAxis><Description>Cylinder head outlet control Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction></YAxis>
      <ZAxis><Description>Correction (°C)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="454" id="cooling_kmwSTEU_KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC13C" /><YAxisID exact="0xC13E" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Water control duty cycle map (kmwSTEU_KF) (XML)</Name>
      <XAxis><Description>Setpoint Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Control temperetare deviation (°C)</Description><Units>°C</Units><Correction>0.1</Correction></YAxis>
      <ZAxis><Description>Duty Cycle %</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="455" id="cooling_kuwHyGRDKF">
    <Conditions><Length>128</Length><XAxisID exact="0xE9E4" /><YAxisID exact="0xF94A" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Hydraulic cooling fan basic speed map (kuwHyGRDKF) (XML)</Name>
      <XAxis><Description>Engine speed (rpm)</Description><Units>RPM</Units></XAxis>
      <YAxis><Description>Cooling output (W)</Description><Units>W</Units></YAxis>
      <ZAxis><Description>Fan speed (rpm)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="456" id="cooling_kuwElGRDKF">
    <Conditions><Length>128</Length><XAxisID exact="0xE9EA" /><YAxisID exact="0xF94A" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Electric cooling fan basic speed map (kuwElGRDKF) (XML)</Name>
      <XAxis><Description>Engine speed (rpm)</Description><Units>RPM</Units></XAxis>
      <YAxis><Description>Cooling output (W)</Description><Units>W</Units></YAxis>
      <ZAxis><Description>Fan speed (rpm)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="457" id="cooling_kuwHyLFTKF">
    <Conditions><Length>128</Length><XAxisID exact="0xF94A" /><YAxisID exact="0xE9E8" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Hydraulic fan speed normalization map (kuwHyLFTKF) (XML)</Name>
      <XAxis><Description>Fan speed (rpm)</Description><Units>RPM</Units></XAxis>
      <YAxis><Description>Engine speed (rpm)</Description><Units>RPM</Units></YAxis>
      <ZAxis><Description>Offset correction</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="458" id="cooling_kmwKOR2_KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC27E" /><YAxisID exact="0xC1C6" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Cooler setpoint correction map 2 (kmwKOR2_KF) (XML)</Name>
      <XAxis><Description>Ambient Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Vehicle speed (Km/h)</Description><Units>KMH</Units><Correction>0.01</Correction></YAxis>
      <ZAxis><Description>Output Temperature (°C)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="459" id="cooling_kuwNLKORKF">
    <Conditions><Length>128</Length><XAxisID exact="0xC1C6" /><YAxisID exact="0xC1AE" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Radiator fan-caster correction map (kuwNLKORKF) (XML)</Name>
      <XAxis><Description>Ambient Intake Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Top of cylinder head Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction (s)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="460" id="cooling_kuwNLKORK2">
    <Conditions><Length>128</Length><XAxisID exact="0xC1AE" /><YAxisID exact="0xC1C6" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Radiator fan-caster correction map 2 (kuwNLKORK2) (XML)</Name>
      <XAxis><Description>Ambient Intake Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Top of cylinder head Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Correction (s)</Description></ZAxis>
      <Correction>1</Correction>
    </Metadata>
  </MapRule>

  <MapRule priority="461" id="cooling_kmwLTKOR_KF">
    <Conditions><Length>128</Length><XAxisID exact="0xC1AC" /><YAxisID exact="0xEA3A" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Cooler temperature characteristic field (kmwLTKOR_KF) (XML)</Name>
      <XAxis><Description>Pressure (mBar)</Description><Units>mbar</Units></XAxis>
      <YAxis><Description>Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Output Temperature (°C)</Description></ZAxis>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
    </Metadata>
  </MapRule>

  <MapRule priority="462" id="cooling_kuwNLGRDKF">
    <Conditions><Length>128</Length><XAxisID exact="0xC1AE" /><YAxisID exact="0xE9FC" /></Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Radiator after-run pump time (kuwNLGRDKF) (XML)</Name>
      <XAxis><Description>Top of cylinder head Temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></XAxis>
      <YAxis><Description>Water flow (l/h)</Description><Units>l/h</Units><Correction>0.015021</Correction></YAxis>
      <ZAxis><Description>Run time (s)</Description></ZAxis>
      <Correction>0.02</Correction>
    </Metadata>
  </MapRule>

  <!-- 31. Glowplug Control Maps -->
  <MapRule priority="470" id="pre_glow_map">
    <Description>Pre-glow map - Legacy:4125</Description>
    <Conditions>
      <Length>20</Length><XAxisLength>2</XAxisLength><YAxisLength>5</YAxisLength>
      <XAxisID exact="0xC1BA" /><YAxisID exact="0xE9AC" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Pre-glow map (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Temperature</Description></XAxis>
      <YAxis><Description>Air pressure</Description></YAxis>
      <ZAxis><Description>Time (sec)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="471" id="glow_plugs_control_map">
    <Description>Glow plugs glow control map - Legacy:3364</Description>
    <Conditions>
      <Length>72</Length><XAxisLength>6</XAxisLength><YAxisLength>6</YAxisLength>
      <XAxisID exact="0xF944" /><YAxisID exact="0xF94A" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Glow plugs glow control map (XML)</Name>
      <Correction>0.01</Correction>
      <XAxis><Description>Engine speed (rpm)</Description><Units>rpm</Units></XAxis>
      <YAxis><Description>Injected quantity (mg/stroke)</Description><Units>mgst</Units></YAxis>
      <ZAxis><Description>Glow plug cycle (%)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="472" id="glowplug_periods_sequential">
    <Description>Glowplug control period lines (NGKL, t1KL, GAZ_KL) - Legacy:5567, 5557, 5550</Description>
    <Conditions>
      <Length>8</Length><XAxisLength>4</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xC1B2" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name sequential="false" baseName="Glowplug control -" codeBlockScoped="true">
        <ConditionalTemplate>
          <When conditionType="SequentialIndex" condition="0">
            <Template>Glowplug control - Afterglow period (gswGS_NGKL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="1">
            <Template>Glowplug control - glow period time in area 1 (gswGS_t1KL) (XML)</Template>
          </When>
          <When conditionType="SequentialIndex" condition="2">
            <Template>Glowplug control - Indicator glow period (gswGAZ_KL) (XML)</Template>
          </When>
          <When conditionType="default">
            <Template>Glowplug control period line {match_index} (XML)</Template>
          </When>
        </ConditionalTemplate>
      </Name>
      <Correction>0.01</Correction>
      <YAxis><Description>Engine temperature (°C)</Description><Units>°C</Units><Correction>0.1</Correction><Offset>-273.1</Offset></YAxis>
      <ZAxis><Description>Period (s)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <!-- 32. Additional Sensor Linearizations -->
  <MapRule priority="480" id="intake_manifold_temp_linear">
    <Description>Intake manifold temperature sensor linearization (anwSTF_KL) - Legacy:3795</Description>
    <Conditions>
      <Length>36</Length><XAxisLength>18</XAxisLength><YAxisLength>1</YAxisLength>
      <Or>
        <Conditions><XAxisID exact="0xEBB2" /></Conditions>
        <Conditions><XAxisID exact="0xEBB4" /></Conditions>
      </Or>
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Intake manifold temperature sensor linearization (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>mV</Description><Units>mV</Units><Correction>4.88758</Correction></YAxis>
      <ZAxis><Description>Temperature (°C)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="485" id="cylinder_head_water_temp_linear">
    <Description>Cylinder head water temperature sensor linearization (anwWTF_KL) - Legacy:3807</Description>
    <Conditions>
      <Length>36</Length><XAxisLength>18</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEB96" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Cylinder head water temperature sensor linearization (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>mV</Description><Units>mV</Units><Correction>4.88758</Correction></YAxis>
      <ZAxis><Description>Temperature (°C)</Description></ZAxis>
    </Metadata>
  </MapRule>

  <MapRule priority="490" id="fuel_temp_sensor_linear_36">
    <Description>Fuel temperature sensor linearization (anwKTF_KL) - Legacy:3820</Description>
    <Conditions>
      <Length>36</Length><XAxisLength>18</XAxisLength><YAxisLength>1</YAxisLength>
      <XAxisID exact="0xEB90" />
    </Conditions>
    <Metadata>
      <Category>Detected maps</Category><Subcategory>Misc</Subcategory>
      <Name>Fuel temperature sensor linearization (XML)</Name>
      <Correction>0.1</Correction><Offset>-273.1</Offset>
      <YAxis><Description>mV</Description><Units>mV</Units><Correction>4.88758</Correction></YAxis>
      <ZAxis><Description>Temperature (°C)</Description></ZAxis>
    </Metadata>
  </MapRule>

</MapRules>
